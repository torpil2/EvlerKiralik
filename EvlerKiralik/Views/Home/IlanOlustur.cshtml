@model dynamic
@using EvlerKiralik.DAL.Entities

@{
    ViewData["Title"] = "IlanOlustur";
    //Layout = "~/Views/Shared/_HomePageLayout.cshtml";
}

@section Scripts{


}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" />
<!-- include libraries(jQuery, bootstrap) -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

<!-- include summernote css/js -->
<link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.js"></script>

<link rel="stylesheet" href="@Url.Content("../css/form.css")" />

<script>

    $("#msform").submit(function (e) {

    e.preventDefault(); // avoid to execute the actual submit of the form.

    var form = $(this);
    var actionUrl = form.attr('action');
    
    $.ajax({
        type: "POST",
        url: actionUrl,
        data: form.serialize(), // serializes the form's elements.
        success: function(data)
        {
          alert(data); // show response from the php script.
        }
    });
    
});

</script>


<script>
    $(function () {
        $('#ilan1').change(function () {
            var id = $('#ilan1').val();
            console.log(id);
            $.ajax({
                url: '/Home/ilcegetirilan',
                data: { a: id },
                type: "POST",
                dataType: "Json",
                success: function (data) {

                    console.log(data);
                    $('#ilan2').empty();
                    for (var i = 0; i < data.length; i++) {
                        $('#ilan2').append("<option value='" + data[i].value + "'>" + data[i].text + "</option>");
                    }
                }
            });
        });
    });
</script>

<script>
    $(function () {
        $('#ilan2').change(function () {
            var id = $('#ilan2').val();
            $.ajax({
                url: '/Home/mahallegetirilan',
                data: { b: id },
                type: "POST",
                dataType: "Json",
                success: function (data) {

                    console.log(data);
                    $('#ilan3').empty();
                    for (var i = 0; i < data.length; i++) {
                        $('#ilan3').append("<option value='" + data[i].value + "'>" + data[i].text + "</option>");
                    }
                }
            });
        });
    });
</script>
<script>
    $(function () {
        $('#ilan3').change(function () {
            var id = $('#ilan3').val();
            $.ajax({
                url: '/Home/sokakgetirilan',
                data: { c: id },
                type: "POST",
                dataType: "Json",
                success: function (data) {

                    console.log(data);
                    $('#ilan4').empty();
                    for (var i = 0; i < data.length; i++) {
                        $('#ilan4').append("<option value='" + data[i].value + "'>" + data[i].text + "</option>");
                    }
                }
            });
        });
    });
</script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

<div id="animateloadingdiv">


    @if(User.Identity.Name != null)
    {
        
   
    <div class="container-fluid">
        <div class="row justify-content-center">
            <div class="col-11 col-sm-10 col-md-10 col-lg-6 col-xl-5 text-center p-0 mt-3 mb-2">
                <div class="card1 px-0 pt-4 pb-0 mt-3 mb-3">
                    <h2 id="heading">Kiralamak İstediğin İlan Bİlgileri</h2>
                    <p>Tüm Alanları Eksiksiz ve Doğru Bir Şekilde Doldurun</p>
                    <form id="msform" action="/Home/IlanOlusturAct">
                        <!-- progressbar -->
                        <ul id="progressbar">
                            <li class="active animate__animated animate__backInLeft" id="account"><strong>Temel</strong></li>
                            <li id="personal"><strong>Detay</strong></li>
                            <li id="odeme"><strong>Yapı </strong></li>
                            <li id="aciklama"><strong>Kiralama</strong></li>
                            <li id="payment"><strong>Açıklama</strong></li>
                            <li id="confirm"><strong>Oluşturuldu</strong></li>

                        </ul>
                        <div class="progress">
                            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
                        </div> <br> <!-- fieldsets -->
                        <!--SAYFA1-->
                        <fieldset>
                            <div class="form-card">
                                <div class="row">
                                    <div class="col-7">
                                        <h2 class="fs-title">Temel BilgiLer:</h2>
                                    </div>
                                    <div class="col-5">
                                        <h2 class="steps">Adım 1 - 6</h2>
                                    </div>
                                </div> <label class="fieldlabels">İlan Adı: *</label> <input type="text" name="ilanadi" placeholder="İlan Adı Giriniz..." />
                                <label class="fieldlabels">İlan İl: *</label><select name="ilanil" id="ilan1"  class="search2 form-control form-control-sm">
                            <option selected">İl Seçiniz</option>

                            @foreach (Iller ililan in Model.IlListesiIlan)
                            {

                                <option title="@ililan.IlId" id="@ililan.IlId"  value="@ililan.IlId">@ililan.İlAdi </option>
                            }
                        </select>
                                <label class="fieldlabels">İlan İLçce: *</label>    <select id="ilan2" name="ilanilce" class="search2 form-control form-control-sm">
                                    <option selected">İlçe Seçiniz</option>
                                </select>
                                <label class="fieldlabels"> İlan Mahalle: *</label>  <select name="ilanmahalle" id="ilan3" class="search2 form-control form-control-sm">
                                    <option selected">Mahalle Seçiniz</option>
                                </select>
                                <label class="fieldlabels"> İlan Sokak: *</label>    <select name="ilansokak" id="ilan4" class="search2 form-control form-control-sm">
                                    <option selected">Sokak Seçiniz</option>
                                </select>

                            </div>
                            <input type="button" name="next" class="next action-button" value="Next" />
                        </fieldset>

                        <!--SAYFA2-->
                        <fieldset>
                            <div class="form-card">
                                <div class="row">
                                    <div class="col-7">
                                        <h2 class="fs-title">Konut Bilgileri:</h2>
                                    </div>
                                    <div class="col-5">
                                        <h2 class="steps">Adım 2 - 6</h2>
                                    </div>
                                </div> <label class="fieldlabels">Ev Tip: *</label> 
                                <select id="evtiplist" autocomplete="off" class="form-control">
                                    @foreach (EvTip EvTipListe in Model.EvTipListe)
                                    {
                                        <option>@EvTipListe.EvTipName </option>
                                    }
                                </select> 
                                <label class="fieldlabels">Oda Sayı: *</label>   
                                <select class="form-control" id="odalist" autocomplete="off">

                                    @foreach (OdaSayisi OdaSay in Model.OdaSayiListe)
                                    {
                                        <option>@OdaSay.OdaSayisi1 </option>
                                    }

                                </select>
                                <label class="fieldlabels">Banyo Sayi.: *</label>
                                <select class="form-control" id="banyosayilist" autocomplete="off">
                                    @foreach (BanyoSayi BanyoSay in Model.BanyoSayiListe)
                                    {
                                        <option>@BanyoSay.BanyoSayi1 </option>
                                    }
                                </select>
                                <label class="fieldlabels">Balkon Sayısı: *</label>
                                <select class="form-control" id="balkonsayilist" autocomplete="off">
                                    @foreach (BalkonSayi Balkonsay in Model.BalkonSayiListe)
                                    {
                                        <option>@Balkonsay.BalkonSayi1 </option>
                                    }
                                </select>

                                 <label class="fieldlabels">Isıtma Tur: *</label>
                                <select class="form-control" id="isitmaturlist" autocomplete="off">
                                    @foreach (IsitmaTur IsitmaTu in Model.IsitmaListe)
                                    {
                                        <option>@IsitmaTu.IsitmaTur1 </option>
                                    }
                                </select>
                            </div>
                            <input type="button" name="next" class="next action-button" value="Next" />
                            <input type="button" name="previous" class="previous action-button-previous" value="Previous" />

                            <!--SAYFA3-->
                        </fieldset>
                            <fieldset>
                        <div class="form-card">
                                <div class="row">
                                    <div class="col-7">
                                        <h2 class="fs-title">Konut Bilgileri:</h2>
                                    </div>
                                    <div class="col-5">
                                        <h2 class="steps">Adım 3 - 6</h2>
                                    </div>
                                </div> <label class="fieldlabels">Eşya Durumu: *</label>
                                <select class="form-control" id="esyalichecklist" autocomplete="off">
                                    @foreach (IsEsyali IsEsyal in Model.EsyaliCheckListe)
                                    {
                                        <option>@IsEsyal.IsEsyali1 </option>
                                    }
                                </select>

                                <label class="fieldlabels">Toplam Kat: *</label>
                               <select class="form-control" id="toplamkatlist" autocomplete="off">
                            @foreach (ToplamKat ToplamKatList in Model.ToplamKatListe)
                            {
                                <option>@ToplamKatList.ToplamKatAdi </option>
                            }
                                </select>
                                

                                <label class="fieldlabels">Bulunduğu Kat.: *</label>
                                <select class="form-control" id="dairekatlist" autocomplete="off">
                                    @foreach (DaireKat DaireKa in Model.DaireKatListe)
                                    {
                                        <option>@DaireKa.DaireKat1 </option>
                                    }
                                </select>

                                <label class="fieldlabels">Bina Yaşı: *</label>
                                <select class="form-control" id="binalist" autocomplete="off">
                            @foreach (BinaYasi Binayas in Model.BinayasiListe)
                            {
                                <option>@Binayas.BinaYasi1 </option>
                            }
                               </select>

                                <label class="fieldlabels">Site İçersinde Mi?: *</label>
                                <select class="form-control" id="sitechecklist" autocomplete="off">
                                    @foreach (IsinSite IsinSit in Model.SiteCheckListe)
                                    {
                                        <option>@IsinSit.IsinSite1 </option>
                                    }
                                </select>

                            </div>
                            <input type="button" name="next" class="next action-button" value="Next" />
                            <input type="button" name="previous" class="previous action-button-previous" value="Previous" />
                        </fieldset>

                        <!--SAYFA4-->
                        <fieldset>
                            <div class="form-card">
                                <div class="row">
                                    <div class="col-7">
                                        <h2 class="fs-title">Ödeme ve Kiralama Bilgileri:</h2>
                                    </div>
                                    <div class="col-5">
                                        <h2 class="steps">Adım 4 - 6</h2>
                                    </div>
                                </div> <label class="fieldlabels">Kimden: *</label>
                                <select class="form-control" id="kimdenlist" autocomplete="off">
                                    @foreach (Kimden KimdenList in Model.KimdenListe)
                                    {
                                        <option>@KimdenList.KimdenAdi </option>
                                    }
                                </select>
                                
                                <label class="fieldlabels">Ödeme Türü: *</label>
                                <select class="form-control" id="odemeturlist" autocomplete="off">
                            @foreach (OdemeTur OdemeTurList in Model.OdemeTurListe)
                            {
                                <option>@OdemeTurList.OdemeTurName </option>
                            }
                                </select> 
                                
                                <label class="fieldlabels">Kiralama Türü: *</label> 
                                <input type="text" name="phno" placeholder="Contact No." /> 
                                
                                <label class="fieldlabels">Minimum Kiralama Süresi.: *</label>
                                <input type="text" name="phno_2" placeholder="Alternate Contact No." />
                            </div>
                            <input type="button" name="next" class="next action-button" value="Next" />
                            <input type="button" name="previous" class="previous action-button-previous" value="Previous" />
                        </fieldset>

                        <!--SAYFA5-->
                        <fieldset>
                            <div class="form-card">
                                <div class="row">
                                    <div class="col-7">
                                        <h2 class="fs-title">İlan Açıklaması:</h2>
                                    </div>
                                    <div class="col-5">
                                        <h2 class="steps">Adım 5 - 6</h2>
                                    </div>
                                </div> 
                                <label class="fieldlabels">İlan Açıklaması Gir:</label>
                              
                                  <textarea id="summernote" name="ilanVerAciklama" style="background-color:white;"></textarea>
                                <script>
                                    $('#summernote').summernote({
                                        placeholder: 'Aciklama ',
                                        tabsize: 2,
                                        height: 400,
                                        disableResizeEditor: true,
                                        toolbar: [
                                            // [groupName, [list of button]]
                                            ['style', ['bold', 'italic', 'underline', 'clear']],
                                            ['font',],
                                            ['fontsize', ['fontsize']],
                                            ['color', ['color']],
                                            ['para', ['ul', 'ol', 'paragraph']],

                                        ]

                                    });
                                </script>                         
                              
                            </div>
                            <input type="button" name="next" class="next action-button" value="Submit" />
                            <input type="button" name="previous" class="previous action-button-previous" value="Previous" />
                        </fieldset>

                        <!--SAYFA6-->
                        <fieldset>
                            <div class="form-card">
                                <div class="row">
                                    <div class="col-7">
                                        <h2 class="fs-title">BİTTİ:</h2>
                                    </div>
                                    <div class="col-5">
                                        <h2 class="steps">Adım 6 - 6</h2>
                                    </div>
                                </div> <br><br>
                                <h2 class="purple-text text-center"><strong>Tebrikler !</strong></h2> <br>
                                <div class="row justify-content-center">
                                    <div class="col-3"> <img src="https://i.imgur.com/GwStPmg.png" class="fit-image"> </div>
                                </div> <br><br>
                                <div class="row justify-content-center">
                                    <div class="col-7 text-center">
                                        <h5 class="purple-text text-center">İlanını başarıyla oluşturdun !</h5>
                                        <a href="#"> <strong><i class="fa-solid fa-image"></i> İlanına Hemen Resim Yükle </strong></a>
                                    </div>
                                </div>
                            </div>
                        </fieldset>

                    </form>
                </div>
            </div>
        </div>
        </div>

    }
    else
    {
        
        <div class="cardd">
    <div class="card-header">
    Featured
    </div>
    <div class="card-body">
    <h5 class="card-title">Special title treatment</h5>
    <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
    <a href = "#" class="btn btn-primary">Go somewhere</a>
    </div>
    </div>
  

        <!-- End Cta Section -->
    }

</div>

<script>
    $(document).ready(function () {

        var current_fs, next_fs, previous_fs; //fieldsets
        var opacity;
        var current = 1;
        var steps = $("fieldset").length;

        setProgressBar(current);

        $(".next").click(function () {

            current_fs = $(this).parent();
            next_fs = $(this).parent().next();

            //Add Class Active
         

            $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active animate__animated animate__backInUp");

            //show the next fieldset
            next_fs.show();
            //hide the current fieldset with style
            current_fs.animate({ opacity: 0 }, {
                step: function (now) {
                    // for making fielset appear animation
                    opacity = 1 - now;

                    current_fs.css({
                        'display': 'none',
                        'position': 'relative'
                    });
                    next_fs.css({ 'opacity': opacity });
                },
                duration: 500
            });
            setProgressBar(++current);
        });

        $(".previous").click(function () {

            current_fs = $(this).parent();
            previous_fs = $(this).parent().prev();

            //Remove class active
       
            $("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active animate__animated animate__backInUp");
              



            //show the previous fieldset
            previous_fs.show();

            //hide the current fieldset with style
            current_fs.animate({ opacity: 0 }, {
                step: function (now) {
                    // for making fielset appear animation
                    opacity = 1 - now;

                    current_fs.css({
                        'display': 'none',
                        'position': 'relative'
                    });
                    previous_fs.css({ 'opacity': opacity });
                },
                duration: 500
            });
            setProgressBar(--current);
        });

        function setProgressBar(curStep) {
            var percent = parseFloat(100 / steps) * curStep;
            percent = percent.toFixed();
            $(".progress-bar")
                .css("width", percent + "%")
        }

        $(".submit").click(function () {
            return false;
        })

    });
</script>



